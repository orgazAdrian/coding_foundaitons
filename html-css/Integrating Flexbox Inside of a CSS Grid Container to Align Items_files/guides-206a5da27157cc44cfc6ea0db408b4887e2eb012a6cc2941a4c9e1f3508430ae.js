const checkSubmissionStatus=(e,s,i)=>{$(".exercise-code #disabledSub .dots").html(".".repeat(s%4)+"&nbsp;".repeat(3-s%4)),$.get("/submission/"+e,function(n){"submitted"===n.status?delayedCheckSubmissionStatus(e,s+1,i):("passed"==n.status&&document.dispatchEvent(new Event("guide:submission:passed")),renderSubmission(e,n.status,i))},"json")},delayFromSubmissionCheckTries=e=>0===e?0:e<=4?2e3:4e3,delayedCheckSubmissionStatus=(e,s,i)=>{s>17?($(".exercise-code #disabledSub").hide(),$(".exercise-code #timeoutSub").fadeIn()):setTimeout(function(){checkSubmissionStatus(e,s,i)},delayFromSubmissionCheckTries(s))},displayResult=e=>{$(".exercise-code #disabledSub").hide(),$(".exercise-code #"+e+"Sub").fadeIn(0).delay(5e3).fadeOut(500)},renderSubmission=(e,s,i)=>{$.get("/submission/"+e+".js",function(){displayResult(s),i&&i()})};document.callOnReady(()=>{$(".exercise-code .form-inline").on("ajax:send",function(){document.dispatchEvent(new Event("guide:submission:sent")),$(".exercise-code #disabledSub").show()}),$(".exercise-code .form-inline").on("ajax:success",function(e,s){s.content&&s.content.hasOwnProperty("link")?renderSubmission(s.id,s.status):delayedCheckSubmissionStatus(s.id,0,function(){$("#submissions textarea.student-submission").each(function(){initializeEditorFromTextarea($(this))})})}),$(".exercise-code .form-inline").on("ajax:error",function(e,s){401===s.status?displayResult("unauthorized"):displayResult("exception")})});