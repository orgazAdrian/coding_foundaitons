/*! For license information please see page_loadjavascript-91bc0aa6a378452b3e10.js.LICENSE.txt */
!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/packs/",n(n.s=33)}({0:function(t,e,n){"use strict";n.r(e),function(t){n.d(e,"appsignal",(function(){return u})),n.d(e,"trackError",(function(){return c})),n.d(e,"withErrorTracking",(function(){return l}));var r=n(1);function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var a={user_id:document.currentUserId},u=new r.a({key:"a1b2e86b-4c3e-4b7e-b603-591b394ae6f8",revision:t.env.APP_REVISION}),c=function(t,e){return u.sendError(t,i({},a,{location:window.location.href}))},l=function(t,e){return u.wrap(t,i({},a,{},e))}}.call(this,n(2))},1:function(t,e,n){"use strict";var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function i(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{u(r.next(t))}catch(e){i(e)}}function a(t){try{u(r.throw(t))}catch(e){i(e)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function s(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}function a(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function u(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function c(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(u(arguments[e]));return t}function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 1===t.length?t[0]:t.reduce((function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t(e.apply(void 0,c(n)))}}))}function f(t){return(f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t){if(t)return Object.keys(t).forEach((function(e){"string"!==typeof t[e]&&"boolean"!==typeof t[e]&&"number"!==typeof t[e]&&(t[e]=JSON.stringify(t[e]))})),t}function p(t){if("undefined"!==typeof t.stacktrace||"undefined"!==typeof t["opera#sourceloc"]){var e=t.stacktrace;return(void 0===e?"":e).split("\n").filter((function(t){return""!==t}))}if(t.stack){var n=t.stack;return(void 0===n?"":n).split("\n").filter((function(t){return""!==t}))}return["No stacktrace available"]}var h=function(){function t(t){this._data=t}return t.prototype.toJSON=function(){return JSON.stringify(this._data)},t.prototype.serialize=function(){return this._data},t}(),y=function(){function t(){}return t.serialize=function(){return{transport:this.transport(),origin:this.origin()}},t.origin=function(){return"ReactNative"!==navigator.product||window.location?window.location.origin||window.location.protocol+"//"+window.location.hostname:""},t.transport=function(){return window.XDomainRequest?"XDomainRequest":window.XMLHttpRequest&&!window.fetch?"XMLHttpRequest":"fetch"},t.supportsPromises=function(){return"Promise"in window&&"resolve"in window.Promise&&"reject"in window.Promise&&"all"in window.Promise&&"race"in window.Promise&&(new window.Promise((function(e){t=e})),"function"===typeof t);var t},t}(),m=function(){function t(t){this.url=t}return t.prototype.send=function(t){var e=this;return new Promise((function(n,r){var o=new XDomainRequest,i=new RegExp("^https?:");o.onload=function(){return n({})},o.open("POST",e.url.replace(i,window.location.protocol)),setTimeout((function(){try{o.send(t)}catch(e){r(e)}}),0)}))},t}(),v=function(){function t(t){this.url=t}return t.prototype.send=function(t){var e=this;return new Promise((function(n,r){try{var o=new XMLHttpRequest;o.onreadystatechange=function(){o.readyState===XMLHttpRequest.DONE&&n({})},o.open("POST",e.url),o.send(t)}catch(i){r(i)}}))},t}(),b=function(){function t(t,e){this.url=t}return t.prototype.send=function(t){return i(this,void 0,void 0,(function(){var e,n;return s(this,(function(r){switch(r.label){case 0:return[4,fetch(this.url,{method:"POST",body:t})];case 1:return e=r.sent(),n=e.statusText,[2,e.ok?Promise.resolve({}):Promise.reject({statusText:n})]}}))}))},t}(),g=function(){function t(t){this._uri=t.uri||"https://appsignal-endpoint.net/collect",this._apiKey=t.key,this._clientVersion=t.version,this._transport=this._createTransport()}return t.prototype.push=function(t){return i(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this._transport.send(t.toJSON())];case 1:return e.sent(),[2,t]}}))}))},t.prototype._createTransport=function(){var t=this._url();switch(y.transport()){case"XDomainRequest":return new m(t);case"XMLHttpRequest":return new v(t);default:return new b(t)}},t.prototype._url=function(){var t,e=this._authorization();return this._uri+"?"+(t=e,Object.keys(t).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&"))},t.prototype._authorization=function(){return{api_key:this._apiKey,version:this._clientVersion}},t}(),w=function(t){function e(e){return t.call(this,o({timestamp:Math.round((new Date).getTime()/1e3),namespace:"frontend",error:{name:"NullError",message:"No error has been set",backtrace:[]}},e))||this}return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.setAction=function(t){return t&&"string"===typeof t?(this._data.action=t,this):this},e.prototype.setNamespace=function(t){return t&&"string"===typeof t?(this._data.namespace=t,this):this},e.prototype.setError=function(t){return t?(this._data.error={name:t.name||"Error",message:t.message||"No message given",backtrace:p(t)},this):this},e.prototype.setTags=function(t){return this._data.tags=o(o({},this._data.tags),function(t){if(t)return Object.keys(t).forEach((function(e){"object"===f(t[e])&&(t[e]=JSON.stringify(t[e])),t[e]=String(t[e])})),t}(t)),this},e.prototype.setParams=function(t){return this._data.params=o(o({},this._data.params),t),this},e.prototype.setBreadcrumbs=function(t){return this._data.breadcrumbs=t,this},e}(h),_=function(){function t(t){this._data=t||[]}return t.prototype.clear=function(){this._data=[]},t.prototype.values=function(){return this._data},t.prototype.push=function(t){var e;(e=this._data).push.apply(e,c(t))},t.prototype.drain=function(){return s(this,(function(t){switch(t.label){case 0:return this._data.length>0?[4,this._data.shift()]:[3,2];case 1:return t.sent(),[3,0];case 2:return[2]}}))},t}(),O=function(){function t(t,e,n){this._retries=0,this._timerID=0,this._duration=0,this._api=e,this._queue=t,this.options=o({limit:5,initialDuration:1e3},n),this.reset()}return t.prototype.schedule=function(t){var e=this;void 0===t&&(t=this._duration);return window.setTimeout((function(){return i(e,void 0,void 0,(function(){var e,n,r,o,i,u,c;return s(this,(function(s){switch(s.label){case 0:s.trys.push([0,7,8,9]),e=a(this._queue.drain()),n=e.next(),s.label=1;case 1:if(n.done)return[3,6];if(!(r=n.value))return[2];s.label=2;case 2:return s.trys.push([2,4,,5]),[4,this._api.push(r)];case 3:return s.sent(),[3,5];case 4:return s.sent(),o=Math.floor(Math.pow(t,1.3)),this._retries=this._retries-1,0===this._retries?this.reset():(this._queue.push(r),this._timerID=this.schedule(o)),[2];case 5:return n=e.next(),[3,1];case 6:return[3,9];case 7:return i=s.sent(),u={error:i},[3,9];case 8:try{n&&!n.done&&(c=e.return)&&c.call(e)}finally{if(u)throw u.error}return[7];case 9:return this.reset(),[2]}}))}))}),t)},t.prototype.reset=function(){var t=this.options,e=t.limit,n=t.initialDuration;this._retries=e,this._duration=n},t}(),k=function(){function t(t){this.VERSION="1.2.0",this._hooks={decorators:Array(),overrides:Array()},this._env=y.serialize(),this._queue=new _(window.__APPSIGNAL_QUEUE__||[]);var e=t.key,n=t.uri,r=t.revision;r&&"string"!==typeof r&&(t.revision=String(r)),this._api=new g({key:e,uri:n,version:this.VERSION}),this.ignored=t.ignoreErrors||[],this._breadcrumbs=[],this._dispatcher=new O(this._queue,this._api),this._options=t}return t.prototype.send=function(t,e,n){var r=this;if(void 0===e&&(e={}),t instanceof Error||t instanceof w){if(0!==this.ignored.length){if(t instanceof Error&&this.ignored.some((function(e){return e.test(t.message)})))return void console.warn("[APPSIGNAL]: Ignored an error: "+t.message);if(t instanceof w){var o=t.serialize().error;if(o.message&&this.ignored.some((function(t){return t.test(o.message)})))return void console.warn("[APPSIGNAL]: Ignored a span: "+o.message)}}var i=t instanceof w?t:this._createSpanFromError(t);return this._hooks.decorators.length>0&&l.apply(void 0,c(this._hooks.decorators))(i),e&&i.setTags(e),n&&i.setNamespace(n),this._breadcrumbs.length>0&&i.setBreadcrumbs(this._breadcrumbs),this._hooks.overrides.length>0&&l.apply(void 0,c(this._hooks.overrides))(i),y.supportsPromises()?(this._breadcrumbs=[],this._api.push(i).catch((function(){r._queue.push(i),setTimeout((function(){return r._dispatcher.schedule()}),0)}))):void console.error("[APPSIGNAL]: Error not sent. A Promise polyfill is required.")}console.error("[APPSIGNAL]: Can't send error, given error is not a valid type")},t.prototype.sendError=function(t,e,n){return this.send(t,e,n)},t.prototype.use=function(t){t.call(this)},t.prototype.createSpan=function(t){var e=this._options,n=e.revision,r=void 0===n?"":n,o=e.namespace,i=new w({environment:this._env,revision:r});return o&&i.setNamespace(o),t&&"function"===typeof t&&t(i),i},t.prototype.wrap=function(t,e,n){return void 0===e&&(e={}),i(this,void 0,void 0,(function(){var r;return s(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,4]),[4,t()];case 1:return[2,o.sent()];case 2:return r=o.sent(),[4,this.sendError(r,e,n)];case 3:return o.sent(),[2,Promise.reject(r)];case 4:return[2]}}))}))},t.prototype.addDecorator=function(t){this._hooks.decorators.push(t)},t.prototype.addOverride=function(t){this._hooks.overrides.push(t)},t.prototype.demo=function(){var t=this._createSpanFromError(new Error("Hello world! This is an error used for demonstration purposes."));t.setAction("TestAction").setParams({path:"/hello",method:"GET"}).setTags({demo_sample:"true"}),this.send(t)},t.prototype.addBreadcrumb=function(t){var e=o(o({timestamp:Math.round((new Date).getTime()/1e3)},t),{metadata:d(t.metadata)});e.category?e.action?(20===this._breadcrumbs.length&&this._breadcrumbs.pop(),this._breadcrumbs.unshift(e)):console.warn("[APPSIGNAL]: Breadcrumb not added. `action` is missing."):console.warn("[APPSIGNAL]: Breadcrumb not added. `category` is missing.")},t.prototype._createSpanFromError=function(t){var e=this.createSpan();return e.setError(t),e},t}();e.a=k},2:function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"===typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var u,c=[],l=!1,f=-1;function d(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&p())}function p(){if(!l){var t=a(d);l=!0;for(var e=c.length;e;){for(u=c,c=[];++f<e;)u&&u[f].run();f=-1,e=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function y(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new h(t,e)),1!==c.length||l||a(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},33:function(t,e,n){"use strict";n.r(e);var r=n(4),o=n(0),i=function(t){if("function"==typeof t)return[t];if(Array.isArray(t))return t;throw new Error("Invalid argument type given")};document.addEventListener("page:javascript:ready",(function(t){var e=t.detail;console.debug("page:javascript:ready",e),Object(o.withErrorTracking)(e.callback,{callbackAddedOn:e.callbackAddedOn,location:window.location.href})})),document.callOnReady=function(t){console.debug("callOnReady",document.URL);var e=window.location.href,n=i(t),s=function(){console.debug("running callOnReady callback"),n.forEach((function(t){Object(o.withErrorTracking)((function(){if("undefined"!=typeof Turbolinks&&Turbolinks.supported){var n=function(){document.dispatchEvent(new CustomEvent("page:javascript:ready",{detail:{callback:t,callbackAddedOn:e}}))};document.turbolinksPageLoaded&&(console.debug("turbolinks:loaded already dispatched"),n()),document.addEventListener("turbolinks:load",n)}else document.addEventListener("DOMContentLoaded",t)}),{location:window.location.href})}))};if(Object(r.isStylesheetLoading)()){console.debug("page-related link is loading");document.addEventListener("page:stylesheet:loaded",(function t(){console.debug("page:stylesheet:loaded"),s(),document.removeEventListener("page:stylesheet:loaded",t)}))}else console.debug("page-related link is loaded"),s()},document.callOnPageChange=function(t){i(t).forEach((function(t){"undefined"!=typeof Turbolinks&&Turbolinks.supported&&document.addEventListener("turbolinks:visit",(function(){return Object(o.withErrorTracking)(t,{location:window.location.href})}))}))}},4:function(t,e,n){"use strict";n.r(e),n.d(e,"isStylesheetLoading",(function(){return o}));var r=["page-stylesheet-link","loading"],o=function(){return document.getElementsByClassName(r.join(" ")).length>0};document.loadStylesheet=function(t){console.debug("adding link",t);var e=document.createElement("link");e.type="text/css",e.rel="stylesheet",e.href=t,r.forEach((function(t){return e.classList.add(t)}));e.addEventListener("load",(function n(){console.debug("link loaded",t),e.classList.remove("loading"),document.dispatchEvent(new Event("page:stylesheet:loaded")),e.removeEventListener("load",n)})),document.head.appendChild(e)}}});
//# sourceMappingURL=page_loadjavascript-91bc0aa6a378452b3e10.js.map